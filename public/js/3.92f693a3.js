(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{b6f9:function(t,e,s){"use strict";var a=s("f8a3"),i=s.n(a);i.a},f8a3:function(t,e,s){},ff79:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.election?s("q-page",{attrs:{padding:""}},[s("div",[s("div",{staticClass:"row",staticStyle:{"background-color":"#f0f8fd"}},[s("div",{staticClass:"col-12"},[s("h4",{staticClass:"text-center",staticStyle:{color:"#34495e"}},[t._v(t._s(t.election.name))]),t.status?t._e():s("Counter",{attrs:{end:{year:new Date(t.election.startTime).getFullYear(),month:new Date(t.election.startTime).getMonth(),date:new Date(t.election.startTime).getDate(),hour:new Date(t.election.startTime).getHours(),minute:new Date(t.election.startTime).getMinutes(),second:new Date(t.election.startTime).getSeconds(),millisecond:new Date(t.election.startTime).getMilliseconds()},start:t.time},on:{ended:function(e){t.status=!0}}})],1)]),s("div",{staticClass:"row"},t._l(t.election.candidates,(function(e,a){return s("div",{key:a,staticClass:"col-4 q-pa-md"},[s("q-card",[s("q-card-section",{staticClass:"row text-center",staticStyle:{background:"linear-gradient(to right, #2b5876, #4e4376)"}},[s("div",{staticClass:"text-h6 col-12 text-center"},[s("div",{staticClass:"text-white q-pb-md"},[t._v("Candidate Card")]),s("q-avatar",{attrs:{rounded:"",size:"100px"}},[s("img",{attrs:{src:"https://www.kindpng.com/picc/m/78-785827_user-profile-avatar-login-account-male-user-icon.png"}})])],1)]),s("q-card-section",[s("span",{staticClass:"text-body1",staticStyle:{color:"#34495e"}},[t._v("Name: "+t._s(e.label))]),s("br"),s("span",{staticClass:"text-body1",staticStyle:{color:"#34495e"}},[t._v("Mandate: "+t._s(e.agenda))]),s("br"),s("span",{staticClass:"text-body1",staticStyle:{color:"#34495e"}},[t._v("\n                              Votes: "),t._l(""+e.votes,(function(e,a){return s("q-avatar",{key:a,staticStyle:{background:"linear-gradient(to right, #42275a, #734b6d)"},attrs:{size:"24px","text-color":"white"}},[t._v(t._s(e))])}))],2)])],1)],1)})),0),t.isLoggedIn?s("div",[!t.stat&&new Date(Date.now())>new Date(t.election.startTime)&&new Date(Date.now())<new Date(t.election.endTime)?s("div",{staticClass:"row",staticStyle:{"background-color":"#f0f8fd"}},[s("div",{staticClass:"col-12 text-center"},[s("h5",{staticStyle:{color:"#34495e"}},[t._v("Cast Your Votes")])]),s("div",{staticClass:"col-12"},[s("q-option-group",{attrs:{options:t.election.candidates,"left-label":""},model:{value:t.vote,callback:function(e){t.vote=e},expression:"vote"}})],1),s("q-btn",{attrs:{label:"Vote",disabled:!t.vote,color:"primary"},on:{click:function(e){return t.enterVote(t.vote,t.election.id)}}})],1):s("div",{staticClass:"row"},[t.stat&&new Date(Date.now())<new Date(t.election.endTime)?s("div",{staticClass:"col-12 text-center"},[s("h5",{staticStyle:{color:"#34495e"}},[t._v("Thank You for Voting")])]):t._e(),new Date(Date.now())>new Date(t.election.endTime)?s("div",{staticClass:"col-12 text-center"},[s("span",{staticClass:"text-h5",staticStyle:{color:"#34495e"}},[t._v("This Election Has Ended")]),s("br")]):t._e()])]):s("div",{staticClass:"row"},[new Date(Date.now())<new Date(t.election.endTime)&&new Date(Date.now())>new Date(t.election.startTime)?s("div",{staticClass:"col-12 text-center"},[s("span",{staticClass:"text-h5",staticStyle:{color:"#34495e"}},[t._v("Please Login To Vote")]),s("br"),s("q-btn",{staticClass:"text-white",attrs:{label:"Login",color:"primary",to:"/login"}})],1):t._e(),new Date(Date.now())>new Date(t.election.endTime)?s("div",{staticClass:"col-12 text-center"},[s("span",{staticClass:"text-h5",staticStyle:{color:"#34495e"}},[t._v("This Election Has Ended")]),s("br"),s("q-markup-table",{staticClass:"table",staticStyle:{width:"350px"}},[s("thead",{staticClass:"bg-indigo-8 text-white"},[s("tr",[s("th",{attrs:{colspan:"5"}},[1===t.winners.length?s("div",{staticClass:"text-h6 q-ml-md text-white"},[t._v("Winner")]):t._e(),t.winners.length>1?s("div",{staticClass:"text-h6 q-ml-md text-white"},[t._v("Tie Winners")]):t._e()])]),s("tr",[s("th",{staticClass:"text-left"},[t._v("S/N")]),s("th",{staticClass:"text-left"},[t._v("Candidate")]),s("th",{staticClass:"text-center"},[t._v("Votes")])])]),s("tbody",{staticClass:"bg-grey-4"},t._l(t.winners,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-left"},[t._v(t._s(a+1))]),s("td",{staticClass:"text-left"},[t._v(t._s(e.label))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.votes))])])})),0)])],1):t._e()])])]):t._e()},i=[],n=(s("e6cf"),s("ded3")),o=s.n(n),c=s("2f62"),r=s("a0bd"),l=s("bc3a"),d=s.n(l),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"text-center"},[s("span",{staticClass:"text-h6",staticStyle:{color:"#34495e"}},[t._v("Election starts: "+t._s(t.display_days)+"d : "+t._s(t.display_hours)+"h : "+t._s(t.display_minutes)+"m :\n  "+t._s(t.display_seconds)+"s")])]):t._e()},u=[],m={props:{end:Object,start:Date},data(){return{display_days:0,display_hours:0,display_minutes:0,display_seconds:0,loaded:!1}},computed:{seconds(){return 1e3},minutes(){return 60*this.seconds},hours(){return 60*this.minutes},days(){return 24*this.hours},endTime(){return new Date(this.end.year,this.end.month,this.end.date,this.end.hour,this.end.minute,this.end.second,this.end.millisecond)},startTime(){return new Date(this.start)}},mounted(){this.showRemaining()},methods:{formatNum(t){return t<10?"0"+t:t},showRemaining(){const t=setInterval((()=>{const e=this.endTime.getTime()-this.startTime.getTime();if(e<0)return this.$emit("ended"),void clearInterval(t);const s=Math.floor(e/this.days),a=Math.floor(e%this.days/this.hours),i=Math.floor(e%this.hours/this.minutes),n=Math.floor(e%this.minutes/this.seconds);this.display_minutes=this.formatNum(i),this.display_seconds=this.formatNum(n),this.display_hours=this.formatNum(a),this.display_days=this.formatNum(s),this.loaded=!0}),1e3)}}},w=m,v=s("2877"),g=Object(v["a"])(w,h,u,!1,null,null,null),p=g.exports,_={components:{Counter:p},data(){return{vote:!1,time:new Date,status:!1,stat:!0}},computed:o()(o()(o()({},Object(c["c"])("elections",["election","getAllElections"])),Object(c["c"])("auth",["isLoggedIn"])),{},{winners(){let t=0,e=[];return this.election&&(this.election.candidates.forEach(((e,s)=>{e.votes>t&&(t=e.votes)})),e=this.election.candidates.filter((e=>e.votes===t))),e}}),mounted(){this.onLoadElection(this.$route.params.id),this.election&&this.subscribe(this.election.id),this.isLoggedIn&&this.checkVoter(this.election.id)},created(){this.timer()},methods:o()(o()({},Object(c["b"])("elections",["onLoadElection","userVote"])),{},{timer(){setInterval((()=>{this.time=new Date}),1e3)},async enterVote(t,e){const s=this.election.candidates.find((e=>e.value===t));try{await d()({method:"POST",url:"api/v1/voters",withCredentials:!0,data:{election:e,candidate:s.id}})}catch(a){this.$q.notify({message:"Something went wrong",icon:"warning",color:"negative",textColor:"white"})}},subscribe(t){r["a"].bind("my-event",(e=>{this.userVote({elections:e.message,electionId:t}),this.checkVoter(this.election.id)}))},async checkVoter(t){try{const e=await d()({method:"GET",url:"api/v1/voters/"+t,withCredentials:!0});this.stat=e.data.data.stat}catch(e){e.response.data.message?this.$q.notify({message:e.response.data.message,icon:"warning",color:"negative",textColor:"white"}):this.$q.notify({message:"Something went wrong",icon:"warning",color:"negative",textColor:"white"})}}})},f=_,y=(s("b6f9"),s("9989")),b=s("f09f"),C=s("a370"),x=s("cb32"),D=s("9f0a"),T=s("9c40"),S=s("2bb1"),k=s("eebe"),q=s.n(k),V=Object(v["a"])(f,a,i,!1,null,null,null);e["default"]=V.exports;q()(V,"components",{QPage:y["a"],QCard:b["a"],QCardSection:C["a"],QAvatar:x["a"],QOptionGroup:D["a"],QBtn:T["a"],QMarkupTable:S["a"]})}}]);